# src/tuck_in_terrors_sim/game_elements/enums.py
from enum import Enum, auto

class CardType(Enum):
    TOY = auto()
    SPELL = auto()
    RITUAL = auto()
    NIGHTMARE_FUEL = auto()

class CardSubType(Enum):
    HAUNT = auto()
    BROWSE_SEARCH = auto()
    SACRIFICE = auto()
    REANIMATE = auto()
    LOOP = auto()
    MEMORY_TOKEN_INTERACT = auto()
    DICE_ROLL = auto()
    NIGHTMARE_INTERACT = auto()
    TEDDY_BEAR = auto()
    DOLL = auto()
    ROBOT = auto()
    CREATURE = auto()
    VEHICLE = auto()
    BUILDING = auto()
    ARCANE = auto()
    ILLUSION = auto()
    PROTECTION = auto()
    DREAMCRAFT = auto()
    INVOCATION = auto()
    WARDING = auto()
    SUMMONING = auto()
    LEGENDARY = auto()
    CURSED = auto()
    STARTER = auto()
    MEMORY = auto()
    TOKEN = auto()

class Zone(Enum):
    DECK = auto()
    HAND = auto()
    IN_PLAY = auto()
    DISCARD = auto()
    EXILE = auto()
    REVEALED = auto()
    LIMBO = auto()
    OBJECTIVE_DECK = auto()
    ATTACHED = auto()
    OUT_OF_GAME = auto()
    SET_ASIDE = auto()
    DECK_TOP = auto()
    BEING_CAST = auto()

class TurnPhase(Enum):
    GAME_SETUP = auto()
    BEGIN_TURN = auto()
    DRAW_PHASE = auto()
    MAIN_PHASE = auto()
    COMBAT_PHASE = auto()
    END_TURN_PHASE = auto() # Used by TurnManager
    CLEANUP_PHASE = auto()
    # END_TURN was an error source, ensure END_TURN_PHASE is used.

class ResourceType(Enum):
    MANA = auto()
    SPIRIT_TOKENS = auto() # Use this instead of SPIRIT
    MEMORY_TOKENS = auto()
    CARDS_IN_HAND = auto()
    CARDS_IN_DECK = auto()
    CARDS_IN_DISCARD = auto()
    TOYS_IN_PLAY = auto()
    NIGHTMARE_LEVEL = auto()
    PLAYER_HEALTH = auto()

class EffectTriggerType(Enum):
    ON_PLAY = auto()
    ON_ENTER_PLAY = auto()
    ON_LEAVE_PLAY = auto()
    ON_DESTROYED = auto()
    ON_DISCARDED = auto()
    ON_DRAWN = auto()
    ACTIVATED_ABILITY = auto()
    AT_BEGINNING_OF_TURN = auto()
    AT_END_OF_TURN = auto()
    BEFORE_THIS_CARD_LEAVES_PLAY = auto()
    BEING_CAST = auto()
    ON_ENTER_PLAY_FROM_DISCARD = auto()
    WHEN_NIGHTMARE_CREEP_APPLIES_TO_PLAYER = auto()
    BEFORE_THIS_CARD_MOVES_ZONES = auto()
    WHEN_COUNTER_REACHES_THRESHOLD = auto()
    WHEN_OTHER_CARD_LEAVES_PLAY = auto()
    WHEN_CARD_ENTERS_PLAY_FROM_DISCARD = auto()
    ON_PLAY_AND_BEGIN_PLAYER_TURN = auto()
    PASSIVE_ABILITY_WHILE_TAPPED = auto()
    WHEN_CARD_PLAYED_FROM_DISCARD_PILE = auto()
    BEGIN_PLAYER_TURN = auto()
    BEGIN_PLAYER_TURN_EVERY_OTHER = auto()
    WHEN_YOU_SACRIFICE_TOY = auto()
    END_PLAYER_TURN = auto() # Note: TurnManager uses END_TURN_PHASE
    WHEN_PROTECTED_TOY_WOULD_LEAVE_PLAY = auto()
    TAP_ABILITY = auto()
    WHEN_CARD_TYPE_PLAYED = auto()
    WHEN_CARD_SUBTYPE_PLAYED = auto()
    WHEN_PLAYER_GAINS_RESOURCE = auto()
    WHEN_PLAYER_LOSES_RESOURCE = auto()
    WHEN_DAMAGE_DEALT = auto()
    WHEN_NIGHTMARE_CREEP_TRIGGERS = auto() # Generic NC trigger
    # ON_NIGHTMARE_CREEP_RESOLUTION_FOR_TURN was an error source, consider this or WHEN_NIGHTMARE_CREEP_APPLIES_TO_PLAYER
    AT_BEGINNING_OF_PHASE = auto()
    AT_END_OF_PHASE = auto()
    WHEN_FIRST_MEMORY_ENTERS_PLAY = auto()
    WHEN_OBJECTIVE_CONDITION_MET = auto()
    PAY_COST_TO_CANCEL_EVENT = auto()

class EffectActionType(Enum):
    ADD_MANA = auto()
    REMOVE_MANA = auto()
    CREATE_SPIRIT_TOKENS = auto()
    REMOVE_SPIRIT_TOKENS = auto()
    CREATE_MEMORY_TOKENS = auto()
    REMOVE_MEMORY_TOKENS = auto()
    DRAW_CARDS = auto()
    DISCARD_CARDS = auto()
    MILL_CARDS = auto() # EffectEngine was using MILL_DECK
    TUTOR_CARD = auto()
    RETURN_CARD_FROM_ZONE_TO_ZONE = auto()
    REANIMATE_CARD = auto()
    EXILE_CARD = auto()
    PLAY_CARD_FROM_ZONE = auto()
    SHUFFLE_ZONE_INTO_DECK = auto()
    LOOK_AT_ZONE = auto()
    ADD_COUNTER = auto()
    REMOVE_COUNTER = auto()
    TAP_CARD = auto()
    UNTAP_CARD = auto()
    SET_CARD_ATTRIBUTE = auto()
    GRANT_TEMPORARY_EFFECT = auto()
    DEAL_DAMAGE = auto()
    HEAL_DAMAGE = auto()
    PLAYER_LOSES_TURN_PHASE = auto()
    PLAYER_GAINS_EXTRA_TURN_PHASE = auto()
    SET_GAME_FLAG = auto()
    CHECK_GAME_FLAG = auto()
    CONDITIONAL_EFFECT = auto()
    PLAYER_CHOICE = auto()
    RESOLVE_SUB_EFFECT = auto()
    CANCEL_IMPENDING_ACTION = auto()
    CANCEL_IMPENDING_LEAVE_PLAY = auto()
    NO_ACTION = auto()
    ADVANCE_OBJECTIVE_PROGRESS = auto()
    CHOOSE_AND_REANIMATE_TOY_WITH_FM_BONUS = auto()
    BROWSE_DECK = auto()
    RETURN_THIS_CARD_TO_HAND = auto()
    CANCEL_IMPENDING_MOVE = auto()
    CREATE_SPIRITS_FROM_STORM_COUNT = auto()
    EMPOWER_RECENTLY_CREATED_SPIRITS = auto()
    REANIMATE_TOY_FROM_DISCARD = auto()
    PLACE_COUNTER_ON_CARD = auto()
    SACRIFICE_CARD_IN_PLAY = auto()
    SEARCH_DECK_FOR_TOY_INTERACTION = auto()
    CHOOSE_OTHER_TOY_TO_PROTECT = auto()
    SACRIFICE_THIS_CARD_TO_SAVE_OTHER = auto()
    ROLL_DICE_SELECT_EFFECT = auto()
    TAKE_EXTRA_TURN = auto()
    GRANT_TAP_ABILITY_TO_TOYS = auto()
    SACRIFICE_RANDOM_TOY_AND_CREATE_MEMORY_TOKENS = auto()
    SKIP_NIGHTMARE_CREEP_EFFECT = auto()
    REPLACEMENT_EFFECT_SPIRIT_TO_MEMORY = auto()
    CANCEL_NIGHTMARE_CREEP_EFFECT = auto()
    SEARCH_DECK_FOR_CARD_TYPE_TO_HAND = auto()
    ADD_MANA_WITH_BONUSES_AND_PENALTIES = auto()
    TRIGGER_NIGHTMARE_CREEP_ADDITIONAL = auto()
    RETURN_DIFFERENT_TOY_FROM_DISCARD_TO_HAND = auto()
    ADVANCE_NIGHTMARE_CREEP_TRACK = auto()
    EXILE_CARD_FROM_ZONE = auto()
    VIEW_EXILED_CARDS_PLAYER_CHOICE = auto()
    PLAY_RANDOM_EXILED_CARD_NO_COST = auto()
    PLAYER_CHOICE_SACRIFICE_TOY = auto()
    RETURN_SACRIFICED_CARD_TO_TOP_DECK = auto()
    PLAYER_CHOICE_RETURN_CARD_FROM_DISCARD_TO_HAND = auto()
    LOOK_AT_TOP_X_PLAY_TOY_NO_COST = auto()
    APPLY_TEMPORARY_EFFECT_PLAYER = auto()
    CREATE_SPIRIT_UNLESS_FM_THEN_MEMORY_TOKEN = auto()
    PLAYER_CHOICE_MODAL = auto()
    SACRIFICE_TOY_FOR_DRAW_BY_TURNS = auto()
    EXILE_OLD_TOY_FOR_MEMORY_BY_TURNS = auto()
    CONVERT_MEMORY_TOKENS_TO_SPIRITS_AND_DRAW = auto()
    PLAYER_CHOICE_TRANSFORM_TOY = auto()
    PROTECT_FROM_SACRIFICE_SPIRITS_NEXT_NC = auto()
    EXILE_CARD_FROM_HAND_PLAYER_CHOICE = auto()
    MODIFY_NEXT_NIGHTMARE_CREEP_EFFECT = auto()
    DISCARD_CARD_OR_SACRIFICE_SPIRIT = auto() # Moved from PlayerChoiceType here, as it's an action the AI decides on

class EffectConditionType(Enum):
    PLAYER_HAS_MANA_GE = auto()
    PLAYER_HAS_MANA_LE = auto()
    PLAYER_HAS_SPIRIT_TOKENS_GE = auto()
    PLAYER_HAS_MEMORY_TOKENS_GE = auto()
    CARD_IS_IN_ZONE = auto()
    ZONE_HAS_CARD_TYPE_COUNT_GE = auto()
    ZONE_HAS_CARD_SUBTYPE_COUNT_GE = auto()
    ZONE_IS_EMPTY = auto()
    CARD_IS_TAPPED = auto() # EffectEngine needs to use this instead of THIS_CARD_IS_TAPPED
    CARD_IS_UNTAPPED = auto()
    THIS_CARD_IS_FIRST_MEMORY = auto()
    IS_FIRST_MEMORY_IN_PLAY = auto()
    HAS_COUNTER_TYPE_VALUE_GE = auto()
    IS_CURRENT_PHASE = auto()
    IS_CURRENT_TURN_GE = auto()
    IS_DAY_OR_NIGHT = auto()
    GAME_FLAG_IS_SET = auto()
    IS_ACTIVE_PLAYER = auto()
    IS_NOT_ACTIVE_PLAYER = auto()
    CARD_HAS_SUBTYPE = auto()
    CARD_HAS_KEYWORD = auto()
    IS_FIRST_MEMORY = auto()
    IS_MOVING_FROM_ZONE = auto()
    IS_MOVING_TO_ZONE = auto()
    EVENT_CARD_IS_TYPE = auto()
    IS_FIRST_MEMORY_IN_DISCARD = auto()
    DECK_SIZE_LE = auto()
    EVENT_CARD_IS_FM = auto()
    PLAYER_HAS_RESOURCE = auto()

class EffectActivationCostType(Enum):
    MANA = auto()
    TAP_THIS_CARD = auto()
    SACRIFICE_THIS_CARD = auto()
    SACRIFICE_OTHER_CARD = auto()
    DISCARD_CARD = auto()
    PAY_SPIRIT_TOKENS = auto()
    PAY_MEMORY_TOKENS = auto()
    EXILE_CARD_FROM_DISCARD = auto()
    SACRIFICE_FROM_PLAY = auto()
    TAP_CARD_IN_PLAY = auto()
    DISCARD_FROM_HAND = auto()
    SACRIFICE_FROM_PLAY_CHOICE = auto()
    PAY_MANA = auto()

class PlayerChoiceType(Enum):
    CHOOSE_YES_NO = auto()
    CHOOSE_FROM_LIST_OF_CARDS = auto()
    CHOOSE_FROM_LIST_OF_EFFECTS = auto()
    CHOOSE_PLAYER = auto()
    CHOOSE_ZONE = auto()
    CHOOSE_NUMBER_UP_TO_X = auto()
    CHOOSE_TARGET_CARD_IN_PLAY = auto()
    CHOOSE_ORDER_OF_CARDS = auto()
    CHOOSE_CARD_FROM_HAND = auto()
    CHOOSE_TOY_TO_SACRIFICE = auto()
    CHOOSE_TOY_TO_SACRIFICE_OPTIONAL = auto()
    YES_NO_PAY_COST = auto()
    CHOOSE_MODAL_EFFECT = auto() # For test_random_ai.py
    DISCARD_CARD_OR_SACRIFICE_SPIRIT = auto() # For test_random_ai.py