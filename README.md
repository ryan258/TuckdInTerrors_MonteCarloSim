# Tuck'd-In Terrors Monte Carlo Simulator

A Python-based Monte Carlo simulator for the solo card game "Tuck'd-In Terrors". This project aims to provide a tool for game balancing, strategy exploration, and understanding game mechanics through automated play.

## Project Status

Currently, the foundational data models (Phase 1) and the core game logic engine (Phase 2 - game state, setup, turn management, action resolution, basic effect engine, Nightmare Creep, and win/loss checking) have been implemented with initial unit tests. The project is now ready to move into AI Player development (Phase 3).

## Features (Implemented or In Progress)

- **Game Element Modeling**: Python classes for Cards (Toys, Rituals, Spells), Objectives, and game Enums.
- **Data Loading**: Parses game data from JSON files (`data/cards.json`, `data/objectives.json`).
- **Core Game Engine**:
  - `GameState`: Tracks the dynamic state of a game.
  - `GameSetup`: Initializes a game based on a chosen Objective.
  - `TurnManager`: Manages the phases of a game turn (Begin, Main, End) and applies turn-based rules.
  - `ActionResolver`: Handles player/AI actions like playing cards and activating abilities.
  - `EffectEngine`: (Initial version) Resolves basic card/game effects.
  - `NightmareCreepModule`: Applies objective-specific Nightmare Creep effects.
  - `WinLossChecker`: Determines if win or loss conditions have been met.
- **Unit Testing**: `pytest` setup with tests for data models and core game logic modules.

## Setup

1.  **Clone the repository** (if you haven't already).
2.  **Ensure Python 3.8+ and `uv` are installed.**
    - You can install `uv` via pip: `pip install uv`
3.  **Navigate to the project root directory** (`TuckdInTerrors_MonteCarloSim/`).
4.  **Create and activate the virtual environment using `uv`:**
    ```bash
    uv venv
    ```
    Activate the environment:
    - On Windows (PowerShell): `.\.venv\Scripts\Activate.ps1`
    - On Linux/macOS (bash/zsh): `source .venv/bin/activate`
5.  **Install dependencies (including development dependencies like pytest):**
    ```bash
    uv pip install .[dev]
    ```
    (This command installs the project itself in editable mode and the `dev` extras defined in `pyproject.toml`.)
    Alternatively, to ensure exact versions if a lock file is generated by `uv`:
    ```bash
    uv pip sync pyproject.toml --all-extras
    ```
    _(Note: The `--all-extras` with `uv pip sync` might behave differently based on `uv` version. `uv pip install .[dev]` is generally reliable for installing extras for development.)_

## Running Tests

With the virtual environment activated and development dependencies installed, run tests from the project root directory:

```bash
pytest
```

You should see all tests passing if the setup is correct and all implemented modules are functioning as expected.

## Populating Game Data

The simulator loads game data from:

- `data/cards.json`: Contains definitions for all game cards.
- `data/objectives.json`: Contains definitions for all game objectives.

Ensure these files are populated according to the defined Python class structures (`Card`, `ObjectiveCard`, etc.) for the simulator to work with your game content. Example structures are provided in the initial JSON files.

## Running Simulations (Future - via `main.py`)

The `main.py` script will be the entry point for running simulations once the AI Player (Phase 3) and Simulation Runner (Phase 5) are implemented.

A conceptual command might look like:

```bash
python main.py --objective OBJ01_THE_FIRST_NIGHT --simulations 1000 --ai random_ai
```

(Command-line arguments and full functionality are part of future development phases.)

## Project Structure Overview

- `data/`: Contains JSON files for game cards and objectives.
- `results/`: (Will be used for) Output directory for simulation logs and analysis reports.
- `src/tuck_in_terrors_sim/`: Main Python package for the simulation engine.
  - `game_elements/`: Data models for cards, objectives, enums, and data loaders.
  - `game_logic/`: Core game engine (state, setup, turn flow, actions, effects, etc.).
  - `ai/`: AI player logic (to be developed).
  - `simulation/`: Simulation orchestration and data analysis (to be developed).
  - `ui/`: (Future) Console output or simple reporting.
  - `utils/`: Common utility functions.
- `tests/`: Unit and integration tests.
- `main.py`: Main script to run simulations (to be fully implemented).
- `pyproject.toml`: Project metadata and dependencies.
- `ROADMAP.md`: This development roadmap.
- `README.md`: This file.

## Next Steps (Roadmap)

- **Phase 3: AI Player Development**
- **Phase 4: Advanced Game Mechanics & Comprehensive Effect Implementation**
- **Phase 5: Simulation Orchestration & Data Analysis**
- **Phase 6: Iteration, Testing & Refinement**

Refer to `ROADMAP.md` for detailed tasks within each phase.
